<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:services="clr-namespace:GAME.Services"
             x:Class="GAME.Views.StatisticsPage"
             Title="Statistics">

    <VerticalStackLayout Padding="15" Spacing="10" VerticalOptions="FillAndExpand">
        
        <Label Text="{Binding Source={x:Static services:LocalizationManager.Instance}, Path=StatisticsTitle}" 
               FontSize="24" 
               FontAttributes="Bold" 
               HorizontalTextAlignment="Center"
               TextColor="#2196F3"/>

        <!-- Top Players -->
        <Frame BorderColor="#4CAF50" CornerRadius="10" Padding="15" HasShadow="True">
            <VerticalStackLayout Spacing="10">
                <Label Text="{Binding Source={x:Static services:LocalizationManager.Instance}, Path=TopPlayersTitle}" FontAttributes="Bold" FontSize="16"/>
                <CollectionView ItemsSource="{Binding TopPlayers}" SelectionMode="None">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Frame BorderColor="#E0E0E0" CornerRadius="5" Padding="10" Margin="5">
                                <VerticalStackLayout Spacing="3">
                                    <Label Text="{Binding Name, StringFormat='ðŸ‘¤ {0}'}" FontAttributes="Bold"/>
                                    <Grid ColumnDefinitions="*,*,*" ColumnSpacing="10">
                                        <Label Text="{Binding Wins, StringFormat='W: {0}'}" Grid.Column="0" FontSize="12"/>
                                        <Label Text="{Binding Losses, StringFormat='L: {0}'}" Grid.Column="1" FontSize="12"/>
                                        <Label Text="{Binding Draws, StringFormat='D: {0}'}" Grid.Column="2" FontSize="12"/>
                                    </Grid>
                                </VerticalStackLayout>
                            </Frame>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </VerticalStackLayout>
        </Frame>

        <!-- Recent Matches -->
        <Frame BorderColor="#FF9800" CornerRadius="10" Padding="15" HasShadow="True">
            <VerticalStackLayout Spacing="10">
                <Label Text="{Binding Source={x:Static services:LocalizationManager.Instance}, Path=RecentMatchesTitle}" FontAttributes="Bold" FontSize="16"/>
                <CollectionView ItemsSource="{Binding RecentMatches}" SelectionMode="None">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Frame BorderColor="#E0E0E0" CornerRadius="5" Padding="10" Margin="5">
                                <VerticalStackLayout Spacing="3">
                                    <Label Text="{Binding Player1Name, StringFormat='ðŸ†š {0}'}" FontSize="12"/>
                                    <Label Text="{Binding Player2Name, StringFormat='   vs {0}'}" FontSize="12"/>
                                    <Label Text="{Binding WinnerName, StringFormat='Winner: {0}'}" FontSize="11" TextColor="#4CAF50"/>
                                    <Label Text="{Binding PlayedAt, StringFormat='Date: {0:g}'}" FontSize="10" TextColor="#999"/>
                                </VerticalStackLayout>
                            </Frame>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </VerticalStackLayout>
        </Frame>

        <Button Text="{Binding Source={x:Static services:LocalizationManager.Instance}, Path=ReturnToMenuButtonText}" 
                Command="{Binding ReturnToMenuCommand}"
                BackgroundColor="#2196F3"
                TextColor="White"
                FontAttributes="Bold"
                Padding="10"/>

    </VerticalStackLayout>

</ContentPage>
